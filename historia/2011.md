# 2011 - Segundo intento

Una vez vistos los problemas que tuvimos con las pruebas realizadas con el primer prototipo empezamos a estudiar otras soluciones tecnológicas que nos permitieran realizar el control de la temperatura. Nuestro principal problema era el alto consumo de energía que conllevaba el uso de Bluetooth 2.0, así que nos encaminamos en la búsqueda de alternativas y así fue cuando conocimos el protocolo *ZigBee.*

## Descubriendo ZigBee

>>***ZigBee*** es el nombre de la especificación de un conjunto de protocolos de alto nivel de comunicación inalámbrica para su utilización con radiodifusión digital de bajo consumo, basada en el estándar IEEE 802.15.4 de redes inalámbricas de área personal. Su objetivo son las aplicaciones que requieren comunicaciones seguras con baja tasa de envío de datos y maximización de la vida útil de sus baterías.

Era exactamente lo que estábamos buscando. Las principales ventajas de este protocolo con respecto a *Bluetooth* tradicional son las siguientes:

- Su bajo consumo.
- Su topología de red en malla.
- Su fácil integración (se pueden fabricar nodos con muy poca electrónica).

## Segundo prototipo

Al igual que hicimos con el dispositivo cuando empezamos a preparar el dispositivo Bluetooth, hicimos una búsqueda de marcos de desarrollo, chips y todo aquella información que nos pudiera ser de valor para montar este segundo prototipo, pero esta vez, y a diferencia del anterior encontramos un fabricante llamado *BluBug* que vende el dispositivo listo para la venta con todos los requerimientos que buscábamos:

1.	Resistente al polvo y al agua (grado de protección IP67)
2.	Batería de larga duración

El dispositivo se llama: *BluBug WML-WSO-04104*, y a continuación podéis ver la imagen del dispositivo, esta vez ya terminado:

![Figura 1](./imagenes/blubug_sensor.jpg)
###### *Figura 1: Sensor de temperatura ZigBee BluBug*

En este caso, el principal reto era buscar la manera de obtener la información del sensor de temperatura usando el protocolo *ZigBee* con un dispositivo de uso comercial. Para ello, contactamos con BlackBerry, estándar de facto en el despliegue de terminales para uso industrial, en ese momento, y nos recomendaron que trabajáramos con un fabricante australiano llamado *Grabba* que cuenta con amplia experiencia en el desarrollo de tecnología móvil y con amplia experiencia en el uso de la tecnología *ZigBee*.

El fabricante contaba con una solución que se conecta a un terminal BlackBerry Curve 9300, con el chip ZigBee. El modelo es *Grabba S-8000d-ZIG*.

![Figura 2](./imagenes/grabba_base_zigbee.jpg)
###### *Figura 1: Base Grabba para BlackBerry que añade conectividad ZigBee*

Estas unidades cuentan con chip *ZigBee*, batería de Li-Ion de 800mAh, y conectores USB y de carga. Además la unidad cuenta con varios LED de estado que nos informan del estado de la batería, así como del funcionamiento de la misma.
Nos pusimos en contacto con el fabricante que nos vendió un par de unidades para poder comenzar con el desarrollo.

## Aplicación móvil

Se realizó una aplicación móvil para BlackBerry que incluía las siguientes características:

- Asociación del terminal con un sensor de temperatura.
- Visualización de los datos del sensor desde el propio dispositivo
- Envío de temperaturas a una plataforma web propia para poder analizar y monitorizar la información de los sensores de forma remota.


**// TODO preguntar a JOSE por capturas de pantalla**

## Construcción de servicio web

Para poder monitorizar los datos de temperatura se crearon servicios web en *Transmobile*, nuestra plataforma de gestión de rutas de terminales por geoposicionamiento. Esta permitía además:

- Gestionar los terminales 
- Crear informes con la información que enviavan los mismos
- Visualización de rutas geoposicionadas

**// TODO preguntar a JOSE por capturas de pantalla y diagramas**


## Prueba piloto

Una vez creada el primer prototipo de aplicación

----------


# Bibliografía

- [ZigBee](http://es.wikipedia.org/wiki/ZigBee)
- [ZigBee sensors](http://www.zigbeesensors.co.uk)
- [Grabba](http://www.grabba.com/)
- [Grado de protección IP67](http://es.wikipedia.org/wiki/Grado_de_protecci%C3%B3n_IP)
